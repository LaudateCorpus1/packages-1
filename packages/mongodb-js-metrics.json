{
  "name": "mongodb-js-metrics",
  "description": "Shareable metric recording.",
  "version": "1.5.0",
  "scripts": {
    "fmt": "mongodb-js-fmt",
    "check": "mongodb-js-precommit",
    "test": "mocha",
    "ci": "npm run check && npm test"
  },
  "homepage": "http://github.com/mongodb-js/metrics",
  "repository": {
    "user": "mongodb-js",
    "repo": "metrics",
    "host": "github.com",
    "branch": "master",
    "apiHost": "api.github.com",
    "tarball_url": "https://api.github.com/repos/mongodb-js/metrics/tarball/master",
    "clone_url": "https://github.com/mongodb-js/metrics",
    "https_url": "https://github.com/mongodb-js/metrics",
    "travis_url": "https://travis-ci.org/mongodb-js/metrics",
    "zip_url": "https://github.com/mongodb-js/metrics/archive/master.zip",
    "api_url": "https://api.github.com/repos/mongodb-js/metrics"
  },
  "dependency-check": {
    "ignore": [
      "electron"
    ]
  },
  "dependencies": {
    "ampersand-collection": "^1.5.0",
    "ampersand-collection-lodash-mixin": "^2.0.1",
    "ampersand-state": "4.8.2",
    "async": "^1.5.1",
    "bugsnag-js": "^2.4.9",
    "caller-id": "^0.1.0",
    "debug": "^2.2.0",
    "lodash": "^4.13.1",
    "mixpanel-browser": "^2.7.2",
    "mongodb-redact": "0.1.0",
    "os-name": "^2.0.1",
    "request": "^2.67.0",
    "singleton-js": "^1.0.0",
    "universal-analytics": "^0.3.9",
    "uuid": "^2.0.1",
    "xhr": "^2.2.0"
  },
  "devDependencies": {
    "eslint-config-mongodb-js": "^2.2.0",
    "mocha": "^2.3.3",
    "mongodb-js-fmt": "0.0.3",
    "mongodb-js-precommit": "^0.2.5",
    "pre-commit": "^1.1.2"
  },
  "license": "Apache-2.0",
  "precommit": [
    "check"
  ],
  "gitHead": "e90d07127fcd66a96be6853ff473187c5338eb00",
  "_npmVersion": "3.10.3",
  "_nodeVersion": "6.3.1",
  "dist": {
    "shasum": "5cd5a0028012baf23af983328aa3b7c64938e89a",
    "tarball": "http://registry.npmjs.org/mongodb-js-metrics/-/mongodb-js-metrics-1.5.0.tgz"
  },
  "versions": [
    {
      "number": "0.0.1",
      "date": "2015-11-11T18:45:04.325Z"
    },
    {
      "number": "0.0.2",
      "date": "2015-11-11T19:05:48.485Z"
    },
    {
      "number": "0.0.3",
      "date": "2015-11-11T19:30:44.781Z"
    },
    {
      "number": "0.0.4",
      "date": "2015-11-11T19:34:14.225Z"
    },
    {
      "number": "0.0.5",
      "date": "2015-11-11T19:42:15.428Z"
    },
    {
      "number": "0.0.6",
      "date": "2015-11-11T19:50:04.683Z"
    },
    {
      "number": "0.0.7",
      "date": "2015-11-11T19:57:04.602Z"
    },
    {
      "number": "0.0.8",
      "date": "2015-11-11T21:05:32.591Z"
    },
    {
      "number": "0.1.0",
      "date": "2015-11-13T17:31:00.920Z"
    },
    {
      "number": "0.2.0",
      "date": "2015-11-13T17:36:03.037Z"
    },
    {
      "number": "0.2.1",
      "date": "2015-11-13T17:41:41.854Z"
    },
    {
      "number": "0.2.2",
      "date": "2015-11-13T17:47:32.558Z"
    },
    {
      "number": "0.2.3",
      "date": "2015-12-02T19:59:07.841Z"
    },
    {
      "number": "0.3.0",
      "date": "2015-12-02T20:03:32.618Z"
    },
    {
      "number": "1.0.0",
      "date": "2016-01-15T03:48:45.759Z"
    },
    {
      "number": "1.1.0",
      "date": "2016-06-21T18:09:25.531Z"
    },
    {
      "number": "1.1.1",
      "date": "2016-06-24T22:51:21.028Z"
    },
    {
      "number": "1.2.0",
      "date": "2016-07-26T09:17:03.664Z"
    },
    {
      "number": "1.3.0",
      "date": "2016-07-26T15:36:26.494Z"
    },
    {
      "number": "1.4.0",
      "date": "2016-07-26T17:50:16.399Z"
    },
    {
      "number": "1.5.0",
      "date": "2016-09-15T19:10:50.739Z"
    }
  ],
  "created": "2015-11-11T18:45:04.325Z",
  "modified": "2016-09-15T19:10:50.739Z",
  "lastPublisher": {
    "name": "jsmulrow",
    "email": "jack.mulrow@gmail.com"
  },
  "owners": [
    {
      "name": "brahmgardner",
      "email": "brahm.gardner@gmail.com"
    },
    {
      "name": "cilix",
      "email": "matthewlevenstein@gmail.com"
    },
    {
      "name": "dpercy",
      "email": "davetp425@gmail.com"
    },
    {
      "name": "durran",
      "email": "durran@gmail.com"
    },
    {
      "name": "glowe",
      "email": "graham.lowe@gmail.com"
    },
    {
      "name": "i80and",
      "email": "i80and@foxquill.com"
    },
    {
      "name": "imlucas",
      "email": "hrabovsky.lucas@gmail.com"
    },
    {
      "name": "kangas",
      "email": "kangas@gmail.com"
    },
    {
      "name": "kay-kim",
      "email": "kay@mongodb.com"
    },
    {
      "name": "machyne",
      "email": "mcotter222@gmail.com"
    },
    {
      "name": "micheal.parks",
      "email": "michealparks1989@gmail.com"
    },
    {
      "name": "mongodb-js-user",
      "email": "lucas.hrabovsky+mongodb-js@10gen.com"
    },
    {
      "name": "redondos",
      "email": "aolivera@gmail.com"
    },
    {
      "name": "rueckstiess",
      "email": "thomas@rueckstiess.net"
    },
    {
      "name": "schwartzrw",
      "email": "schwartzrw@gmail.com"
    },
    {
      "name": "shum",
      "email": "chris.shum@mongodb.com"
    }
  ],
  "readme": "# mongodb-js-metrics [![travis][travis_img]][travis_url] [![npm][npm_img]][npm_url]\nmongodb-js-metrics is a reusable metrics wrapper for a number of external tracking services. Currently, it supports [Google Analytics][ga], [Intercom][intercom], [Mixpanel][mixpanel] and [Bugsnag][bugsnag].\n\n## Quick Start\nHere is an example how to set up Google Analytics tracking of application launches, screen views and user logins within your app.\n\n```js\n// require the built-in resources and the metrics object itself\nvar resources = require('mongodb-js-metrics').resources;\nvar metrics = require('mongodb-js-metrics')(); // note the () at the end\n\n// configure Google Analytics with our tracking id\nmetrics.configure('ga', {\n  trackingId: 'UA-########-#',\n  enabled: true\n});\n\n// create an app resource with name and version\nvar app = new resources.AppResource({\n  appName: 'My Cool App',\n  appVersion: '2.0.1'\n});\n\n// create a user resource with client id (UUID v4 recommended)\nvar user = new resources.UserResource({\n  clientId: '3c007a83-e8c3-4b52-9631-b5fd97950dce'\n});\n\n// add the resources to the metrics module to set everything up\nmetrics.addResource(app, user);\n\n// track an application launch event\nmetrics.track('App', 'launched');\n\n// track a user login event\nmetrics.track('User', 'login');\n\n// track a screen view of the start screen\nmetrics.track('App', 'viewed', 'Start Screen');\n```\n\nThe call to `metrics.track()` is just a convenience wrapper. You could also just call the action on the resource itself (actions are methods on the resource). For example, pass the `user` resource to the code parts that handle user actions, and whenever the user logs in, call:\n\n```js\n// assumes you have a reference to the `user` resource above\nuser.login();\n\n// identical to...\nmetrics.track('User', 'login');\n```\n\nBecause `metrics` is a singleton, you don't have to worry about passing it (or the resources) around or polluting your global context. Once the Resources are added in your app setup code, you can always just access another reference:\n\n```js\n// in some other file in your project, e.g. the Help Screen\nvar metrics = require('mongodb-js-metrics')();\nmetrics.track('App', 'viewed', 'Help Screen');\n```\n\n## Details\nThe metrics module is a singleton. Any new instantiation will return a reference to the existing singleton object.\n\n```js\n// note the () at the end, to instantiate the singleton\nvar metrics = require('mongodb-js-metrics')();\n```\n\nThe `metrics` object holds references to trackers and resources, and makes the trackers available to the resources. It also contains convenient helper methods to  make tracking very easy.\n\n### Trackers\nThe current version supports 4 trackers:\n\n##### Google Analytics\n\nUsed to send _screen views_, _events_, _errors_, _timings_. Tracker name is `ga`. Requires **App** and **User** resources.\n\n##### Intercom\n\nUsed to send _events_ and also provides _in-app communication_. Tracker name is `intercom`. Requires **App** and **User** resources.\n\n\n##### Mixpanel\n\nUsed to send _events_. Tracker name is `mixpanel`. Requires **App** and **User** resources.\n\n##### Bugsnag\n\nUsed to send _errors_. Tracker name is `bugsnag`. Requires **App** resource.\n\n\n#### Configuration\nYou can configure individual trackers with the `configure(name, options)` syntax. Note the different key names for the keys,\nwhich use each of the tracker's terminology for consistency. Trackers are disabled by default, so don't forget to enable them.\n\n```js\n// configure Google Analytics\nmetrics.configure('ga', {\n  trackingId: 'UA-########-#',\n  enabled: true\n});\n\n// configure Bugsnag\nmetrics.configure('bugsnag', {\n  apiKey: '################################',\n  enabled: true\n});\n\n// configure Intercom\nmetrics.configure('intercom', {\n  appId: '########',\n  enabled: true\n});\n\n// configure Mixpanel\nmetrics.configure('mixpanel', {\n  apiToken: '#####################',\n  enabled: true\n});\n```\n\nYou can also configure multiple trackers at once, by passing in a single object to the `configure(options)` method. The keys have to match the tracker names:\n\n```js\nmetrics.configure({\n  ga: {\n    trackingId: 'UA-########-#',\n    enabled: true\n  },\n  bugsnag: {\n    apiKey: '################################',\n    enabled: true\n  }\n});\n```\n\nConfiguring a tracker automatically enables it. This behavior can be disabled by explicitly passing in `{enabled: false}` into the options for the tracker.\n\n### Resources\nEverything you want to track is organized into _resources_ and their _actions_. Each resource/action pair can be reported differently to one or more trackers.\n\nFor example, if you want to track application launches, you would create an _App_ resource with a `launched` action. If you want to track different types of errors, you could create an `Error` resource and give it different actions, like `info`, `warning`, `error`.\n\nResources have access to the trackers, and by default assign their properties to all trackers that require the properties. For example, the _App_ resource has  a property called `appName`. When the resource is added to metrics, it automatically pushes the `appName` value to all trackers that define it as one of their properties.\n\nYou need to add resources before you can track anything. The _App_ and _User_ resources are almost always required. Once they are added (see Quick Start for an example), you can use the `metrics.track()` helper to conveniently track events.\n\nThe first argument to `track()` is the name of the resource (as a convention, all resources have uppercase names, and all actions have lowercase names). The second argument is the name of the action you want to call. Subsequent arguments are passed to the action method, including a potential `callback` parameter at the end.\n\n```js\nmetrics.track('User', 'login', { timestamp: new Date(), team: 'Awesome' }, function(err, resp) {\n  if (err) {\n    // warn and silently ignore if the action couldn't be tracked\n    console.warn('could not track user login, because: ', err);\n    return;\n  }\n  // should return status code 200\n  console.log('error successfully tracked with status code', resp.statusCode);\n});\n```\n\n### Built-in Resources\nmongodb-js-metrics comes with some commonly used built-in resources already. Those resources and their actions are:\n- App\n  - `launched()`\n  - `quit(exitCode)`\n  - `upgraded(previousVersion)`\n  - `viewed(screenName)`\n\n- User\n  - `created()`\n  - `login()`\n  - `logout()`\n\n- Error\n  - `info(err)`\n  - `warning(err)`\n  - `error(err)`\n\n- Feature (derive from this for each feature you use)\n  - `used(metadata)`\n\n- Host (no tracking action, used for super properties)\n\nExample how to track the usage of a plasma cannon and what strength was used:\n\n```js\nvar FeatureResource = require('mongodb-js-metrics').resources.FeatureResource;\nvar metrics = require('mongodb-js-metrics')();\n\nvar PlasmaCannon = FeatureResource.extend({\n  id: 'Plasma Cannon'\n});\n\nmetrics.addResource(new PlasmaCannon());\n\n// assumes trackers are configured and `App` and `User` resources added previously\nmetrics.track('Plasma Cannon', 'used', {\n  strength: 19\n});\n```\n\n### Custom Resources\nYou can also build custom Resources that are specific to your app and use them as you would use the built-in ones. Make them extend the `BaseResource` and follow its interface. For an example, look at the built-in resources under `./lib/resources/` to see how they are implemented.\n\n## License\nApache 2.0\n\n[travis_img]: https://img.shields.io/travis/mongodb-js/metrics.svg\n[travis_url]: https://travis-ci.org/mongodb-js/metrics\n[npm_img]: https://img.shields.io/npm/v/mongodb-js-metrics.svg\n[npm_url]: https://npmjs.org/package/mongodb-js-metrics\n[ga]: https://analytics.google.com\n[intercom]: https://intercom.io\n[bugsnag]: https://bugsnag.com\n[mixpanel]: https://mixpanel.com\n"
}