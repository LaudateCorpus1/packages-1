{
  "name": "ms-payments",
  "description": "Core of the microservice for handling payments",
  "main": "./lib/index.js",
  "scripts": {
    "compile": "babel -d ./lib ./src",
    "prepublish": "npm run compile",
    "test": "npm run lint && DEBUG=nightmare* ./test/docker.sh",
    "lint": "eslint ./src",
    "start": "node ./bin/mservice.js | ./node_modules/.bin/bunyan -o short",
    "semantic-release": "semantic-release pre && npm publish && semantic-release post"
  },
  "repository": {
    "user": "makeomatic",
    "repo": "ms-payments",
    "host": "github.com",
    "branch": "master",
    "apiHost": "api.github.com",
    "tarball_url": "https://api.github.com/repos/makeomatic/ms-payments/tarball/master",
    "clone_url": "https://github.com/makeomatic/ms-payments",
    "https_url": "https://github.com/makeomatic/ms-payments",
    "travis_url": "https://travis-ci.org/makeomatic/ms-payments",
    "zip_url": "https://github.com/makeomatic/ms-payments/archive/master.zip",
    "api_url": "https://api.github.com/repos/makeomatic/ms-payments"
  },
  "author": {
    "name": "Dmitry Gorbunov",
    "email": "me@tewi.tk"
  },
  "license": "MIT",
  "homepage": "https://github.com/makeomatic/ms-payments#readme",
  "dependencies": {
    "bluebird": "^3.4.1",
    "bunyan": "^1.8.1",
    "bytes": "^2.4.0",
    "cluster-key-slot": "^1.0.6",
    "common-errors": "^0.5.7",
    "continuation-local-storage": "^3.1.7",
    "debug": "^2.2.0",
    "ioredis": "^2.2.0",
    "lodash": "^4.13.1",
    "moment": "^2.14.1",
    "ms-amqp-conf": "^0.2.0",
    "ms-amqp-transport": "^3.1.0",
    "ms-mailer-client": "^3.0.0",
    "ms-mailer-templates": "^0.7.0",
    "ms-validation": "^2.0.0",
    "mservice": "^2.6.0",
    "node-uuid": "^1.4.6",
    "paypal-rest-sdk": "^1.6.9",
    "redis-filtered-sort": "^1.1.1",
    "request-promise": "^3.0.0",
    "urlsafe-base64": "^1.0.0"
  },
  "devDependencies": {
    "babel-cli": "^6.10.1",
    "babel-eslint": "^6.1.0",
    "babel-plugin-transform-class-properties": "^6.10.2",
    "babel-plugin-transform-es2015-destructuring": "^6.9.0",
    "babel-plugin-transform-es2015-parameters": "^6.9.0",
    "babel-plugin-transform-es2015-shorthand-properties": "^6.8.0",
    "babel-plugin-transform-es2015-spread": "^6.8.0",
    "babel-plugin-transform-object-rest-spread": "^6.8.0",
    "babel-plugin-transform-strict-mode": "^6.8.0",
    "babel-preset-es2015": "^6.9.0",
    "babel-preset-stage-0": "^6.3.13",
    "babel-register": "^6.9.0",
    "codecov.io": "^0.1.6",
    "cz-conventional-changelog": "^1.1.6",
    "electron-prebuilt": "^1.2.6",
    "eslint": "^3.0.1",
    "eslint-config-airbnb-base": "^4.0.0",
    "eslint-plugin-import": "^1.10.2",
    "eslint-plugin-mocha": "^4.0.0",
    "isparta": "^4.0.0",
    "istanbul": "^0.4.4",
    "json": "^9.0.4",
    "latest-version-cli": "^1.0.0",
    "mocha": "^2.5.3",
    "nightmare": "github:avvs/nightmare",
    "semantic-release": "^4.3.5",
    "sinon": "^1.17.4"
  },
  "release": {
    "verifyConditions": []
  },
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  },
  "version": "1.2.0",
  "gitHead": "9c450fec11485ddc5f7900f61d82682ec2c12b6e",
  "_npmVersion": "3.9.3",
  "_nodeVersion": "6.2.1",
  "dist": {
    "shasum": "21b522d84c3716ed42eab1996b2674381e5bee00",
    "tarball": "http://registry.npmjs.org/ms-payments/-/ms-payments-1.2.0.tgz"
  },
  "versions": [
    {
      "number": "0.0.1",
      "date": "2015-12-01T19:18:46.191Z"
    },
    {
      "number": "0.0.2",
      "date": "2015-12-02T15:17:16.322Z"
    },
    {
      "number": "0.0.3",
      "date": "2015-12-07T14:17:50.375Z"
    },
    {
      "number": "0.0.4",
      "date": "2015-12-07T14:21:20.127Z"
    },
    {
      "number": "0.0.5",
      "date": "2015-12-07T15:00:51.746Z"
    },
    {
      "number": "0.0.6",
      "date": "2015-12-07T16:05:31.524Z"
    },
    {
      "number": "0.1.1",
      "date": "2015-12-15T13:07:34.166Z"
    },
    {
      "number": "0.1.2",
      "date": "2015-12-15T16:14:20.687Z"
    },
    {
      "number": "0.1.3",
      "date": "2015-12-15T16:17:24.927Z"
    },
    {
      "number": "0.1.4",
      "date": "2015-12-17T12:03:22.231Z"
    },
    {
      "number": "0.1.5",
      "date": "2015-12-17T12:05:51.936Z"
    },
    {
      "number": "0.1.6",
      "date": "2015-12-17T13:38:55.336Z"
    },
    {
      "number": "0.1.7",
      "date": "2015-12-23T14:59:36.493Z"
    },
    {
      "number": "0.1.8",
      "date": "2015-12-23T15:59:10.075Z"
    },
    {
      "number": "0.1.9",
      "date": "2015-12-24T15:48:59.780Z"
    },
    {
      "number": "0.1.10",
      "date": "2015-12-25T10:13:22.810Z"
    },
    {
      "number": "0.1.11",
      "date": "2015-12-25T10:37:22.176Z"
    },
    {
      "number": "0.1.12",
      "date": "2015-12-25T10:39:27.034Z"
    },
    {
      "number": "0.1.13",
      "date": "2015-12-25T20:35:39.045Z"
    },
    {
      "number": "0.1.14",
      "date": "2015-12-26T11:50:38.792Z"
    },
    {
      "number": "0.1.15",
      "date": "2015-12-26T12:59:17.479Z"
    },
    {
      "number": "0.2.0",
      "date": "2016-01-14T18:23:14.002Z"
    },
    {
      "number": "0.2.1",
      "date": "2016-01-15T18:13:42.999Z"
    },
    {
      "number": "0.3.0",
      "date": "2016-01-21T09:20:08.983Z"
    },
    {
      "number": "1.0.0",
      "date": "2016-01-25T19:56:46.277Z"
    },
    {
      "number": "1.0.1",
      "date": "2016-01-31T16:20:25.398Z"
    },
    {
      "number": "1.0.2",
      "date": "2016-02-03T12:43:01.590Z"
    },
    {
      "number": "1.0.3",
      "date": "2016-02-11T22:20:45.205Z"
    },
    {
      "number": "1.0.4",
      "date": "2016-02-11T23:03:56.957Z"
    },
    {
      "number": "1.0.5",
      "date": "2016-02-12T14:43:31.624Z"
    },
    {
      "number": "1.0.6",
      "date": "2016-02-12T15:07:50.076Z"
    },
    {
      "number": "1.0.7",
      "date": "2016-02-12T15:25:05.894Z"
    },
    {
      "number": "1.0.8",
      "date": "2016-02-12T19:14:47.035Z"
    },
    {
      "number": "1.0.9",
      "date": "2016-02-25T08:23:03.228Z"
    },
    {
      "number": "1.0.10",
      "date": "2016-02-25T21:21:16.955Z"
    },
    {
      "number": "1.0.11",
      "date": "2016-02-25T22:23:34.483Z"
    },
    {
      "number": "1.1.0",
      "date": "2016-03-29T14:51:54.145Z"
    },
    {
      "number": "1.1.1",
      "date": "2016-07-07T10:37:30.753Z"
    },
    {
      "number": "1.2.0",
      "date": "2016-07-07T11:36:30.547Z"
    }
  ],
  "created": "2015-12-01T19:18:46.191Z",
  "modified": "2016-07-07T11:36:30.547Z",
  "lastPublisher": {
    "name": "avvs",
    "email": "v@aminev.me"
  },
  "owners": [
    {
      "name": "avvs",
      "email": "v@aminev.me"
    },
    {
      "name": "fuwaneko",
      "email": "atskiisotona@gmail.com"
    }
  ],
  "readme": "# Microservice for handling PayPal payments over AMQP transport layer\n\n[![Build Status](https://semaphoreci.com/api/v1/makeomatic/ms-payments/branches/master/shields_badge.svg)](https://semaphoreci.com/makeomatic/ms-payments)\n[![Code Climate](https://codeclimate.com/github/makeomatic/ms-payments/badges/gpa.svg)](https://codeclimate.com/github/makeomatic/ms-payments)\n[![npm version](https://badge.fury.io/js/ms-payments.svg)](https://badge.fury.io/js/ms-payments)\n[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg?style=flat-square)](https://github.com/semantic-release/semantic-release)\n[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)\n[![codecov.io](https://codecov.io/github/makeomatic/ms-payments/coverage.svg?branch=master)](https://codecov.io/github/makeomatic/ms-payments?branch=master)\n\n## Plans\n\n### Plans workflow\n\nPlan is a PayPal object first, then database object stored on our side. Keep that in mind all the time.\n\nPayPal follows specific schema for plan description which describes how subscriber would be charged.\n\nOn our side we need to attach additional data: if plan is available to subscribe and subscription options.\n\nAfter plan has been created it becomes available for users to subscribe.\n\n### Create plan\n\nTo create a plan you need to provide certain data for create endpoint.\n\n```\n{\n  \"hidden\": <true|false>, // use true to make plan invisible to normal users\n  \"alias\": <string>, // use this to set up plan alias (for your convenience)\n  \"subscriptions\": [<subscription>], // this is most important part: links our metadata with plan charging models\n  \"plan\": <plan> // charging models for plan, this must be strictly as paypal wants (see it's documentation or plan.json)\n}\n```\n\nNow onto subscriptions.\n\n```\n{\n  \"models\": <number>, // number of models added on each billing cycle (month or year)\n  \"price\": <number>, // price of additional models (for 1 model)\n  \"name\": <string> // name of subscription, see below\n}\n```\n\nSubscription name **must be exactly the same** as plan payment definition name.\n\nAs for plan, you must specify \"name\", \"description\", \"type\", \"payment_definitions\" and \"merchant_preferences\" only.\n\n```\n{\n  \"name\": <string>, // plan name, could be anything\n  \"description\": <string>, // plan description, ditto\n  \"type\": \"infinite\", // paypal provides 2 options, use infinite only\n  \"payment_definitions\": [<definition>], // most important part, defines charging models\n  \"merchant_preferences\": [<preference>] // additional data, not really important\n}\n```\n\nPayment definitions are simple and as with subscriptions you need to provide only 2 of them: monthly and annual.\n\n```\n{\n  \"name\": <string>, // must be exactly the same as in subscription\n  \"type\": \"regular\", // paypal provides option for trial plans too, but it's not implemented on our side\n  \"frequency_interval\": \"1\", // string! how often to charge, you don't need to use anything more than 1\n  \"frequency\": <month|year>, // paypal supports daily and weekly plans too, not implemented\n  \"cycles\": \"0\", // must be \"0\" (string, not number)\n  \"amount\": {\n    \"currency\": \"USD\", // can be any ISO 4217 code you want\n    \"value\": \"10.0\", // string! any valid ISO 4217 amount\n  },\n  \"charge_models\": [<charge>] // apply tax here\n}\n```\n\nCharge model allows you to apply tax and shipping (not applicable for us).\n\n```\n{\n  \"type\": <tax|shipping>, // self-descriptive\n  \"amount\": {\n    \"currency\": \"USD\", // can be any ISO 4217 code you want\n    \"value\": \"10.0\", // string! any valid ISO 4217 amount\n  }\n}\n```\n"
}