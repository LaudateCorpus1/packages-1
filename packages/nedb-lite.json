{
  "package.json": true,
  "author": {
    "name": "kai zhu",
    "email": "kaizhu256@gmail.com"
  },
  "description": "this package will run a standalone, browser-compatible version of the nedb v1.8.0 database with zero npm-dependencies",
  "devDependencies": {
    "electron-lite": "github:kaizhu256/node-electron-lite#alpha",
    "utility2": "github:kaizhu256/node-utility2#alpha"
  },
  "engines": {
    "node": ">=4.2"
  },
  "homepage": "https://github.com/kaizhu256/node-nedb-lite",
  "keywords": [
    "browser",
    "db",
    "indexeddb",
    "localstorage",
    "mongo",
    "mongodb",
    "nedb",
    "no-sql",
    "nosql",
    "persistence",
    "persistent",
    "web",
    "web-sql",
    "websql"
  ],
  "license": "MIT",
  "name": "nedb-lite",
  "os": [
    "darwin",
    "linux"
  ],
  "repository": {
    "user": "kaizhu256",
    "repo": "node-nedb-lite",
    "host": "github.com",
    "branch": "master",
    "apiHost": "api.github.com",
    "tarball_url": "https://api.github.com/repos/kaizhu256/node-nedb-lite/tarball/master",
    "clone_url": "https://github.com/kaizhu256/node-nedb-lite",
    "https_url": "https://github.com/kaizhu256/node-nedb-lite",
    "travis_url": "https://travis-ci.org/kaizhu256/node-nedb-lite",
    "zip_url": "https://github.com/kaizhu256/node-nedb-lite/archive/master.zip",
    "api_url": "https://api.github.com/repos/kaizhu256/node-nedb-lite"
  },
  "scripts": {
    "build-ci": "utility2 shRun shReadmeBuild",
    "start": "export PORT=${PORT:-8080} && export npm_config_mode_auto_restart=1 && utility2 shRun shIstanbulCover test.js",
    "test": "export PORT=$(utility2 shServerPortRandom) && utility2 test test.js"
  },
  "version": "2016.9.1",
  "_npmVersion": "3.10.3",
  "_nodeVersion": "6.3.1",
  "dist": {
    "shasum": "f06d76bdd32a3210fc827be3e4333006e861627f",
    "tarball": "http://registry.npmjs.org/nedb-lite/-/nedb-lite-2016.9.1.tgz"
  },
  "stars": 2,
  "versions": [
    {
      "number": "2016.1.1",
      "date": "2016-02-29T09:05:03.633Z"
    },
    {
      "number": "2016.1.2",
      "date": "2016-02-29T19:16:38.713Z"
    },
    {
      "number": "2016.1.3",
      "date": "2016-03-19T08:53:46.592Z"
    },
    {
      "number": "2016.4.1",
      "date": "2016-05-12T17:32:47.519Z"
    },
    {
      "number": "2016.4.2",
      "date": "2016-05-12T17:47:35.434Z"
    },
    {
      "number": "2016.5.1",
      "date": "2016-06-12T00:36:14.819Z"
    },
    {
      "number": "2016.8.1",
      "date": "2016-08-25T13:11:57.535Z"
    },
    {
      "number": "2016.8.2",
      "date": "2016-08-25T13:35:35.330Z"
    },
    {
      "number": "2016.8.3",
      "date": "2016-08-26T01:06:37.211Z"
    },
    {
      "number": "2016.9.1",
      "date": "2016-10-02T04:15:09.987Z"
    }
  ],
  "created": "2016-02-29T09:05:03.633Z",
  "modified": "2016-10-02T04:15:09.987Z",
  "lastPublisher": {
    "name": "kaizhu",
    "email": "kaizhu256@gmail.com"
  },
  "owners": [
    {
      "name": "kaizhu",
      "email": "kaizhu256@gmail.com"
    }
  ],
  "readme": "nedb-lite\n=========\nthis package will run a standalone, browser-compatible version of the nedb v1.8.0 database with zero npm-dependencies\n\n[![travis-ci.org build-status](https://api.travis-ci.org/kaizhu256/node-nedb-lite.svg)](https://travis-ci.org/kaizhu256/node-nedb-lite)\n\n[![NPM](https://nodei.co/npm/nedb-lite.png?downloads=true)](https://www.npmjs.com/package/nedb-lite)\n\n[![package-listing](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.gitLsTree.svg)](https://github.com/kaizhu256/node-nedb-lite)\n\n\n\n# live demo\n- [https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/app/index.html](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/app/index.html)\n\n[![github.com test-server](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.githubDeploy.browser._2Fnode-nedb-lite_2Fbuild..alpha..travis-ci.org_2Fapp_2Findex.html.png)](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/app/index.html)\n\n\n\n# documentation\n#### todo\n- none\n\n#### change since c6fd675c\n- npm publish 2016.9.1\n- make db always persistent\n- removed support for native-datetime (automatically converted to iso-string)\n- tables automatically includes createdAt and updatedAt fields\n- remove async dependency\n- remove localForage dependency\n- remove underscore dependency\n- remove util dependency\n- none\n\n#### this package requires\n- darwin or linux os\n\n#### additional info\n- nedb derived from https://github.com/louischatriot/nedb/blob/cadf4ef434e517e47c4e9ca1db5b89e892ff5981/browser-version/out/nedb.js\n\n#### differences from original nedb @ https://github.com/louischatriot/nedb\n- shared js-env - removed options afterSerialization, beforeSerialization, corruptAlertThreshold, inMemoryOnly\n- shared js-env - removed support for native-datetime (automatically converted to iso-string)\n- shared js-env - removed support for promises (callbacks only)\n- shared js-env - tables always have the timestamp-fields createdAt and updatedAt\n- browser js-env - removed support for persistence in localStorage and web-sql (persistence requires indexedDB)\n- node js-env - removed support for ms-windows platform\n\n#### api-doc\n- [https://kaizhu256.github.io/node-nedb-lite/build/doc.api.html](https://kaizhu256.github.io/node-nedb-lite/build/doc.api.html)\n\n[![api-doc](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.docApiCreate.browser._2Fhome_2Ftravis_2Fbuild_2Fkaizhu256_2Fnode-nedb-lite_2Ftmp_2Fbuild_2Fdoc.api.html.png)](https://kaizhu256.github.io/node-nedb-lite/build/doc.api.html)\n\n\n\n# build-status [![travis-ci.org build-status](https://api.travis-ci.org/kaizhu256/node-nedb-lite.svg)](https://travis-ci.org/kaizhu256/node-nedb-lite)\n[![build commit status](https://kaizhu256.github.io/node-nedb-lite/build/build.badge.svg)](https://travis-ci.org/kaizhu256/node-nedb-lite)\n\n| git-branch : | [master](https://github.com/kaizhu256/node-nedb-lite/tree/master) | [beta](https://github.com/kaizhu256/node-nedb-lite/tree/beta) | [alpha](https://github.com/kaizhu256/node-nedb-lite/tree/alpha)|\n|--:|:--|:--|:--|\n| test-server-1 : | [![github.com test-server](https://kaizhu256.github.io/node-nedb-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-nedb-lite/build..master..travis-ci.org/app/index.html) | [![github.com test-server](https://kaizhu256.github.io/node-nedb-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/app/index.html) | [![github.com test-server](https://kaizhu256.github.io/node-nedb-lite/GitHub-Mark-32px.png)](https://kaizhu256.github.io/node-nedb-lite/build..alpha..travis-ci.org/app/index.html)|\n| test-server-2 : | [![heroku.com test-server](https://kaizhu256.github.io/node-nedb-lite/heroku-logo.75x25.png)](https://hrku01-nedb-lite-master.herokuapp.com) | [![heroku.com test-server](https://kaizhu256.github.io/node-nedb-lite/heroku-logo.75x25.png)](https://hrku01-nedb-lite-beta.herokuapp.com) | [![heroku.com test-server](https://kaizhu256.github.io/node-nedb-lite/heroku-logo.75x25.png)](https://hrku01-nedb-lite-alpha.herokuapp.com)|\n| test-report : | [![test-report](https://kaizhu256.github.io/node-nedb-lite/build..master..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..master..travis-ci.org/test-report.html) | [![test-report](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/test-report.html) | [![test-report](https://kaizhu256.github.io/node-nedb-lite/build..alpha..travis-ci.org/test-report.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..alpha..travis-ci.org/test-report.html)|\n| coverage : | [![istanbul coverage](https://kaizhu256.github.io/node-nedb-lite/build..master..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..master..travis-ci.org/coverage.html/index.html) | [![istanbul coverage](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..beta..travis-ci.org/coverage.html/index.html) | [![istanbul coverage](https://kaizhu256.github.io/node-nedb-lite/build..alpha..travis-ci.org/coverage.badge.svg)](https://kaizhu256.github.io/node-nedb-lite/build..alpha..travis-ci.org/coverage.html/index.html)|\n| build-artifacts : | [![build-artifacts](https://kaizhu256.github.io/node-nedb-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-nedb-lite/tree/gh-pages/build..master..travis-ci.org) | [![build-artifacts](https://kaizhu256.github.io/node-nedb-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-nedb-lite/tree/gh-pages/build..beta..travis-ci.org) | [![build-artifacts](https://kaizhu256.github.io/node-nedb-lite/glyphicons_144_folder_open.png)](https://github.com/kaizhu256/node-nedb-lite/tree/gh-pages/build..alpha..travis-ci.org)|\n\n#### master branch\n- stable branch\n- HEAD should be tagged, npm-published package\n\n#### beta branch\n- semi-stable branch\n- HEAD should be latest, npm-published package\n\n#### alpha branch\n- unstable branch\n- HEAD is arbitrary\n- commit history may be rewritten\n\n\n\n# quickstart web example\n![screen-capture](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.testExampleJs.browser..png)\n\n#### to run this example, follow the instruction in the script below\n- [example.js](https://kaizhu256.github.io/node-nedb-lite/build/example.js)\n```javascript\n/*\nexample.js\n\nthis script will will demo the browser-version of nedb\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install nedb-lite && export PORT=8081 && node example.js\n    3. open a browser to http://localhost:8081\n    4. edit or paste script in browser to eval\n*/\n\n/* istanbul instrument in package nedb-lite */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        /* istanbul ignore next */\n        // re-init local\n        local = local.modeJs === 'browser'\n            ? window.Nedb.local\n            : module.isRollup\n            ? module\n            : require('nedb-lite').local;\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        ['error', 'log'].forEach(function (key) {\n            console['_' + key] = console[key];\n            console[key] = function () {\n                console['_' + key].apply(console, arguments);\n                document.querySelector('#outputTextarea1').value +=\n                    Array.prototype.slice.call(arguments).map(function (arg) {\n                        return typeof arg === 'string'\n                            ? arg\n                            : local.Nedb.jsonStringifyOrdered(arg, null, 4);\n                    }).join(' ') + '\\n';\n            };\n        });\n        /* istanbul ignore next */\n        local.testRun = function (event) {\n            var reader, tmp;\n            switch (event && event.currentTarget.id) {\n            case 'nedbExportButton1':\n                tmp = window.URL.createObjectURL(new window.Blob([local.Nedb.dbExport()]));\n                document.querySelector('#nedbExportA1').href = tmp;\n                document.querySelector('#nedbExportA1').click();\n                setTimeout(function () {\n                    window.URL.revokeObjectURL(tmp);\n                }, 30000);\n                break;\n            case 'nedbImportButton1':\n                document.querySelector('#nedbImportInput1').click();\n                break;\n            case 'nedbImportInput1':\n                document.querySelector('#outputTextarea1').value = '';\n                console.log('importing nedb-database ...');\n                reader = new window.FileReader();\n                tmp = document.querySelector('#nedbImportInput1').files[0];\n                if (!tmp) {\n                    return;\n                }\n                reader.addEventListener('load', function () {\n                    local.Nedb.dbImport(reader.result, function () {\n                        console.log('... imported nedb-database');\n                    });\n                });\n                reader.readAsText(tmp);\n                break;\n            case 'nedbResetButton1':\n                document.querySelector('#outputTextarea1').value = '';\n                console.log('resetting nedb-database ...');\n                local.Nedb.dbReset(function () {\n                    console.log('... resetted nedb-database');\n                });\n                break;\n            case 'testRunButton1':\n                local.modeTest = true;\n                local.utility2.testRun(local);\n                break;\n            default:\n                document.querySelector('#outputTextarea1').value = '';\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextarea1').value);\n                } catch (errorCaught) {\n                    document.querySelector('#outputTextarea1').value = errorCaught.stack;\n                }\n            }\n        };\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.prototype.slice.call(\n                document.querySelectorAll('.on' + event)\n            ).forEach(function (element) {\n                element.addEventListener(event, local.testRun);\n            });\n        });\n        // run tests\n        local.testRun();\n        break;\n\n\n\n    /* istanbul ignore next */\n    // run node js-env code - post-init\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.path = require('path');\n        local.url = require('url');\n        // init assets\n        /* jslint-ignore-begin */\n        local.templateIndexHtml = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>\\n\\\n{{envDict.npm_package_name}} v{{envDict.npm_package_version}}\\n\\\n</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    ids: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background-color: #fff;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\nbody > button {\\n\\\n    width: 15rem;\\n\\\n}\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 16rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background-color: #ddd;\\n\\\n}\\n\\\n.zeroPixel {\\n\\\n    border: 0;\\n\\\n    height: 0;\\n\\\n    margin: 0;\\n\\\n    padding: 0;\\n\\\n    width: 0;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n    <h1>\\n\\\n<!-- utility2-comment\\n\\\n        <a\\n\\\n            {{#if envDict.npm_package_homepage}}\\n\\\n            href=\"{{envDict.npm_package_homepage}}\"\\n\\\n            {{/if envDict.npm_package_homepage}}\\n\\\n            target=\"_blank\"\\n\\\n        >\\n\\\nutility2-comment -->\\n\\\n            {{envDict.npm_package_name}} v{{envDict.npm_package_version}}\\n\\\n<!-- utility2-comment\\n\\\n        </a>\\n\\\nutility2-comment -->\\n\\\n<!-- utility2-comment\\n\\\n        {{#if envDict.NODE_ENV}}\\n\\\n        (NODE_ENV={{envDict.NODE_ENV}})\\n\\\n        {{/if envDict.NODE_ENV}}\\n\\\nutility2-comment -->\\n\\\n    </h1>\\n\\\n    <h3>{{envDict.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n    <h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n    <button class=\"onclick\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n    <div class=\"testReportDiv\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n    <button class=\"onclick\" id=\"nedbResetButton1\">reset nedb-database</button><br>\\n\\\n    <button class=\"onclick\" id=\"nedbExportButton1\">save nedb-database to file</button><br>\\n\\\n    <a download=\"nedb.persistence.json\" href=\"\" id=\"nedbExportA1\"></a>\\n\\\n    <button class=\"onclick\" id=\"nedbImportButton1\">load nedb-database from file</button><br>\\n\\\n    <input class=\"onchange zeroPixel\" type=\"file\" id=\"nedbImportInput1\">\\n\\\n    <label>edit or paste script below to\\n\\\n        <a\\n\\\n            href=\"https://kaizhu256.github.io/node-nedb-lite/build/doc.api.html\"\\n\\\n            target=\"_blank\"\\n\\\n        >eval</a>\\n\\\n    </label>\\n\\\n<textarea class=\"onkeyup\" id=\"inputTextarea1\">\\n\\\nwindow.table1 = window.Nedb.dbTableCreate({ name: \"table1\" });\\n\\\ntable1.insert({ field1: \"hello\", field2: \"world\"}, function () {\\n\\\n    console.log();\\n\\\n    console.log(table1.export());\\n\\\n});\\n\\\n\\n\\\nwindow.table2 = window.Nedb.dbTableCreate({ name: \"table2\" });\\n\\\ntable2.insert({ field1: \"hello\", field2: \"world\"}, function () {\\n\\\n    console.log();\\n\\\n    console.log(table2.export());\\n\\\n});\\n\\\n</textarea>\\n\\\n    <label>stderr and stdout</label>\\n\\\n    <textarea id=\"outputTextarea1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n    {{#if isRollup}}\\n\\\n    <script src=\"assets.app.min.js\"></script>\\n\\\n    {{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n    <script src=\"assets.utility2.rollup.js\"></script>\\n\\\n    <script src=\"jsonp.utility2.stateInit?callback=window.utility2.stateInit\"></script>\\n\\\n    <script src=\"assets.nedb-lite.js\"></script>\\n\\\n    <script src=\"assets.example.js\"></script>\\n\\\n    <script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n    {{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        local['/'] = local.templateIndexHtml\n            .replace((/\\{\\{envDict\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                // jslint-hack\n                String(match0);\n                switch (match1) {\n                case 'npm_package_description':\n                    return 'example module';\n                case 'npm_package_name':\n                    return 'example';\n                case 'npm_package_version':\n                    return '0.0.1';\n                }\n            });\n        if (module.isRollup) {\n            break;\n        }\n        try {\n            local['/assets.example.js'] = local.fs.readFileSync(__filename, 'utf8');\n        } catch (ignore) {\n        }\n        local['/assets.nedb-lite.js'] = local.fs.readFileSync(\n            local.Nedb.__dirname + '/index.js',\n            'utf8'\n        );\n        // run the cli\n        if (module !== require.main) {\n            break;\n        }\n        // start server\n        console.log('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            switch (local.url.parse(request.url).pathname) {\n            case '/':\n            case '/assets.example.js':\n            case '/assets.nedb-lite.js':\n            case '/assets.test.js':\n                response.end(local[local.url.parse(request.url).pathname]);\n                break;\n            default:\n                response.end();\n            }\n        }).listen(process.env.PORT);\n        // if $npm_config_timeout_exit is defined,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        break;\n    }\n}());\n```\n\n#### output from electron\n![screen-capture](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.testExampleJs.browser..png)\n\n#### output from shell\n![screen-capture](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.testExampleJs.svg)\n\n\n\n# package.json\n```json\n{\n    \"package.json\": true,\n    \"author\": \"kai zhu <kaizhu256@gmail.com>\",\n    \"description\": \"{{packageJson.description}}\",\n    \"devDependencies\": {\n        \"electron-lite\": \"kaizhu256/node-electron-lite#alpha\",\n        \"utility2\": \"kaizhu256/node-utility2#alpha\"\n    },\n    \"engines\": { \"node\": \">=4.2\" },\n    \"homepage\": \"https://github.com/kaizhu256/node-nedb-lite\",\n    \"keywords\": [\n        \"browser\",\n        \"db\",\n        \"indexeddb\",\n        \"localstorage\",\n        \"mongo\", \"mongodb\",\n        \"nedb\", \"no-sql\", \"nosql\",\n        \"persistence\", \"persistent\",\n        \"web\", \"web-sql\", \"websql\"\n    ],\n    \"license\": \"MIT\",\n    \"name\": \"nedb-lite\",\n    \"os\": [\"darwin\", \"linux\"],\n    \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/kaizhu256/node-nedb-lite.git\"\n    },\n    \"scripts\": {\n        \"build-ci\": \"utility2 shRun shReadmeBuild\",\n        \"start\": \"\\\nexport PORT=${PORT:-8080} && \\\nexport npm_config_mode_auto_restart=1 && \\\nutility2 shRun shIstanbulCover test.js\",\n        \"test\": \"export PORT=$(utility2 shServerPortRandom) && utility2 test test.js\"\n    },\n    \"version\": \"2016.9.1\"\n}\n```\n\n\n\n# changelog of last 50 commits\n[![screen-capture](https://kaizhu256.github.io/node-nedb-lite/build/screen-capture.gitLog.svg)](https://github.com/kaizhu256/node-nedb-lite/commits)\n\n\n\n# internal build-script\n- build.sh\n```shell\n# build.sh\n\n# this shell script will run the build for this package\n\nshBuildCiTestPre() {(set -e\n# this function will run the pre-test build\n    # test example.js\n    (export MODE_BUILD=testExampleJs &&\n        shRunScreenCapture shReadmeTestJs example.js) || return $?\n    # test published-package\n    (export MODE_BUILD=npmTestPublished &&\n        shRunScreenCapture shNpmTestPublished) || return $?\n    # coverage-hack - reset mock persistence\n    mkdir -p tmp/nedb.persistence.test\n    touch tmp/nedb.persistence.test/undefined\n)}\n\nshBuildCiTestPost() {(set -e\n# this function will run the post-test build\n    # if running legacy-node, then return\n    [ \"$(node --version)\" \\< \"v5.0\" ] && return || true\n    export NODE_ENV=production\n    # deploy app to gh-pages\n    export TEST_URL=\"https://$(printf \"$GITHUB_REPO\" | \\\n        sed 's/\\//.github.io\\//')/build..$CI_BRANCH..travis-ci.org/app/index.html\"\n    (export MODE_BUILD=githubDeploy &&\n        shGithubDeploy) || return $?\n    # test deployed app to gh-pages\n    (export MODE_BUILD=githubTest &&\n        export modeBrowserTest=test &&\n        export url=\"$TEST_URL?modeTest=1&timeExit={{timeExit}}\" &&\n        shBrowserTest) || return $?\n    # deploy app to heroku\n    export HEROKU_REPO=\"hrku01-$npm_package_name-$CI_BRANCH\"\n    export TEST_URL=\"https://$HEROKU_REPO.herokuapp.com\"\n    shGitRepoBranchUpdateLocal() {(set -e\n    # this function will local-update git-repo-branch\n        cp \"$npm_config_dir_build/app/assets.app.js\" .\n        printf \"web: npm_config_mode_backend=1 node assets.app.js\" > Procfile\n    )}\n    (export MODE_BUILD=herokuDeploy &&\n        shHerokuDeploy) || return $?\n    # test deployed app to heroku\n    (export MODE_BUILD=herokuTest &&\n        export modeBrowserTest=test &&\n        export url=\"$TEST_URL?modeTest=1&timeExit={{timeExit}}\" &&\n        shBrowserTest) || return $?\n)}\n\nshBuild() {(set -e\n# this function will run the main build\n    # init env\n    . node_modules/.bin/utility2 && shInit\n    # cleanup github-gh-pages dir\n    # export BUILD_GITHUB_UPLOAD_PRE_SH=\"rm -fr build\"\n    # init github-gh-pages commit-limit\n    export COMMIT_LIMIT=16\n    # if branch is alpha, beta, or master, then run default build\n    if [ \"$CI_BRANCH\" = alpha ] ||\n        [ \"$CI_BRANCH\" = beta ] ||\n        [ \"$CI_BRANCH\" = master ]\n    then\n        shBuildCiDefault\n    fi\n)}\nshBuild\n```\n"
}