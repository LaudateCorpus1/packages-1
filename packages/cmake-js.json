{
  "name": "cmake-js",
  "description": "CMake.js - a Node.js/io.js native addon build tool",
  "license": "MIT",
  "keywords": [
    "native",
    "addon",
    "module",
    "c",
    "c++",
    "bindings",
    "build",
    "cmake",
    "nw.js",
    "electron",
    "boost"
  ],
  "version": "3.2.1",
  "author": {
    "name": "Gábor Mező aka unbornchikken"
  },
  "repository": {
    "user": "unbornchikken",
    "repo": "cmake-js",
    "host": "github.com",
    "branch": "master",
    "apiHost": "api.github.com",
    "tarball_url": "https://api.github.com/repos/unbornchikken/cmake-js/tarball/master",
    "clone_url": "https://github.com/unbornchikken/cmake-js",
    "https_url": "https://github.com/unbornchikken/cmake-js",
    "travis_url": "https://travis-ci.org/unbornchikken/cmake-js",
    "zip_url": "https://github.com/unbornchikken/cmake-js/archive/master.zip",
    "api_url": "https://api.github.com/repos/unbornchikken/cmake-js"
  },
  "bin": {
    "cmake-js": "./bin/cmake-js"
  },
  "engines": {
    "node": ">= 0.10.0",
    "iojs": ">= 1.0.0"
  },
  "dependencies": {
    "bluebird": "^2.9.15",
    "debug": "^2.1.3",
    "fs-extra": "^0.16.5",
    "is-iojs": "^1.0.1",
    "lodash": "^3.6.0",
    "memory-stream": "0",
    "npmconf": "^2.1.2",
    "npmlog": "^1.2.0",
    "request": "^2.54.0",
    "semver": "^5.0.3",
    "splitargs": "0",
    "tar": "^1.0.3",
    "traceur": "0.0.x",
    "unzip": "^0.1.11",
    "url-join": "0",
    "which": "^1.0.9",
    "yargs": "^3.6.0"
  },
  "devDependencies": {
    "gulp": "*",
    "gulp-sequence": "*",
    "gulp-sourcemaps": "*",
    "gulp-traceur": "*",
    "mocha": "*",
    "nan": "^2.1.0"
  },
  "scripts": {
    "test": "mocha tests",
    "compile": "gulp"
  },
  "gitHead": "0ae32bf650a975c5bb5dd65847d2a5b234685b2c",
  "homepage": "https://github.com/unbornchikken/cmake-js#readme",
  "_npmVersion": "3.8.3",
  "_nodeVersion": "5.10.1",
  "dist": {
    "shasum": "fb92b6becfd1a52515e62f08ae0b9c97dc62596d",
    "tarball": "http://registry.npmjs.org/cmake-js/-/cmake-js-3.2.1.tgz"
  },
  "stars": 12,
  "versions": [
    {
      "number": "0.8.0",
      "date": "2015-03-28T14:00:21.324Z"
    },
    {
      "number": "0.8.1",
      "date": "2015-03-28T19:42:19.214Z"
    },
    {
      "number": "0.8.2",
      "date": "2015-03-30T08:06:35.792Z"
    },
    {
      "number": "0.8.3",
      "date": "2015-04-02T18:30:55.192Z"
    },
    {
      "number": "0.8.4",
      "date": "2015-04-05T11:03:32.019Z"
    },
    {
      "number": "0.8.5",
      "date": "2015-04-05T12:24:09.822Z"
    },
    {
      "number": "0.8.6",
      "date": "2015-04-11T10:12:19.898Z"
    },
    {
      "number": "0.8.7",
      "date": "2015-04-14T19:13:16.150Z"
    },
    {
      "number": "0.8.8",
      "date": "2015-04-14T19:18:17.203Z"
    },
    {
      "number": "0.9.0",
      "date": "2015-04-22T10:20:24.283Z"
    },
    {
      "number": "0.9.1",
      "date": "2015-04-22T10:21:15.459Z"
    },
    {
      "number": "0.9.2",
      "date": "2015-04-28T10:31:44.286Z"
    },
    {
      "number": "0.9.5",
      "date": "2015-05-03T10:22:53.036Z"
    },
    {
      "number": "0.9.6",
      "date": "2015-05-04T06:15:37.171Z"
    },
    {
      "number": "0.10.0",
      "date": "2015-05-05T18:41:05.866Z"
    },
    {
      "number": "0.10.1",
      "date": "2015-05-06T10:10:24.796Z"
    },
    {
      "number": "0.10.2",
      "date": "2015-05-07T09:26:44.930Z"
    },
    {
      "number": "0.10.3",
      "date": "2015-05-07T14:05:31.666Z"
    },
    {
      "number": "0.10.4",
      "date": "2015-05-08T09:13:14.225Z"
    },
    {
      "number": "0.11.0",
      "date": "2015-05-19T07:17:09.587Z"
    },
    {
      "number": "0.11.1",
      "date": "2015-05-19T07:27:38.356Z"
    },
    {
      "number": "0.11.2",
      "date": "2015-05-19T19:53:44.824Z"
    },
    {
      "number": "0.11.4",
      "date": "2015-05-20T07:00:55.542Z"
    },
    {
      "number": "0.11.5",
      "date": "2015-05-23T14:01:38.729Z"
    },
    {
      "number": "0.11.6",
      "date": "2015-05-23T15:09:08.088Z"
    },
    {
      "number": "0.11.7",
      "date": "2015-05-26T11:01:13.028Z"
    },
    {
      "number": "0.12.0",
      "date": "2015-05-27T19:46:55.190Z"
    },
    {
      "number": "0.12.1",
      "date": "2015-05-27T20:14:26.773Z"
    },
    {
      "number": "0.12.2",
      "date": "2015-05-28T11:23:29.243Z"
    },
    {
      "number": "1.0.0",
      "date": "2015-06-02T21:03:46.238Z"
    },
    {
      "number": "1.0.1",
      "date": "2015-06-24T18:53:47.597Z"
    },
    {
      "number": "1.0.2",
      "date": "2015-07-07T07:40:10.739Z"
    },
    {
      "number": "1.1.0",
      "date": "2015-10-15T19:46:27.474Z"
    },
    {
      "number": "1.1.1",
      "date": "2015-10-16T06:41:17.205Z"
    },
    {
      "number": "2.0.0",
      "date": "2015-10-17T19:12:42.590Z"
    },
    {
      "number": "2.0.1",
      "date": "2015-10-22T18:43:44.563Z"
    },
    {
      "number": "2.0.2",
      "date": "2015-10-22T18:44:19.741Z"
    },
    {
      "number": "2.1.0",
      "date": "2015-10-29T20:17:33.700Z"
    },
    {
      "number": "3.0.0",
      "date": "2015-11-20T21:21:12.462Z"
    },
    {
      "number": "3.1.0",
      "date": "2016-02-03T12:45:09.570Z"
    },
    {
      "number": "3.1.1",
      "date": "2016-02-04T08:48:38.549Z"
    },
    {
      "number": "3.1.2",
      "date": "2016-02-04T14:39:05.354Z"
    },
    {
      "number": "3.2.0",
      "date": "2016-04-25T20:30:57.927Z"
    },
    {
      "number": "3.2.1",
      "date": "2016-04-25T20:48:58.779Z"
    }
  ],
  "created": "2015-03-28T14:00:21.324Z",
  "modified": "2016-04-25T20:48:58.779Z",
  "lastPublisher": {
    "name": "unbornchikken",
    "email": "gabor.mezo@outlook.com"
  },
  "owners": [
    {
      "name": "unbornchikken",
      "email": "gabor.mezo@outlook.com"
    }
  ],
  "readme": "# CMake.js (MIT)\n\n## Announcement - Works without Visual Studio!\n\nJust install [Visual C++ Build Tools TP](https://www.microsoft.com/en-us/download/details.aspx?id=49983) and CMake.js will use that if there\nis no Visual C++ available.\n\n## About\nCMake.js is a Node.js/io.js native addon build tool which works *exactly* like [node-gyp](https://github.com/TooTallNate/node-gyp), but instead of [gyp](http://en.wikipedia.org/wiki/GYP_%28software%29), it is based on [CMake](http://cmake.org) build system. It's compatible with the following runtimes:\n\n- Node.js 0.10+\n- io.js\n- [NW.js](https://github.com/nwjs/nw.js): all CMake.js based native modules are compatible with NW.js out-of-the-box, there is no [nw-gyp like magic](https://github.com/nwjs/nw.js/wiki/Using-Node-modules#3rd-party-modules-with-cc-addons) required\n- [Electron](https://github.com/atom/electron) (formerly known as atom-shell): out-of-the-box build support, [no post build steps required](https://github.com/atom/electron/blob/master/docs/tutorial/using-native-node-modules.md)\n\n### Supported native libraries\n\n- **Boost**: it's supported by a separate module called boost-lib, that manages Boost dependencies, downloads and installs appropriate Boost versions from Github, and compiles its required libraries automatically. See the [readme](https://github.com/unbornchikken/boost-lib) and the [tutorial](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-04-Creating-CMake.js-based-native-modules-with-Boost-dependency).\n\n## Why CMake?\nNearly every native addon is using node-gyp today, so what's wrong with it?\n\n1. First of all, Google, the creator of the gyp platform is moving\ntowards its new build system called [gn](https://code.google.com/p/chromium/wiki/gn),\nwhich means gyp's days of support are counted. (Just for the record, despite the announced gn switch,\nthere is [Bazel](https://github.com/google/bazel) in the works, so sooner or later gn will be dropped in favor of it - IMHO.)\n\n2. It uses Python 2 which is a huge PITA in the current century, and because of the above, there is no hope for upgrade,\nsee: [node-gyp Issue #193](https://github.com/TooTallNate/node-gyp/issues/193).\n\n3. While gyp is very good in dependency management and project generation,\nit still lacks features of essential build customization  \n(see: [gyp wiki - Custom_build_steps](https://code.google.com/p/gyp/wiki/GypUserDocumentation#Custom_build_steps)).\n\n4. [Its wiki](http://code.google.com/p/gyp/w/list) might be enough for an inhouse project,\nbut far from what can be called for a good product documentation.\n\n5. If you wanna port a native library to node as an addon,\nthere is a (very-very) good chance that it doesn't use gyp for its build system,\nyou have to make gyp binding by hand, which is really hard or nearly impossible considering the previous bulletpoint.\nAlso you have to be an expert of the given build system **and** gyp to do it right.\n\n6. There is no IDE that supports gyp as a native project format. Gyp can be used to generate IDE projects,\nbut this is not a two way operation, if you tune your settings or setup in the IDE,\nyou have to propagate changes back to gyp files by hand.\n\n7. Gyp itself isn't capable to build node modules,\nthere is fair amount custom JS code in node-gyp module to make it capable to doing so\n(that's why it named as Generate Your Project not Build Your Project).\nSo supporting advanced build features like Ninja generators is impossible without extra development effort added to node-gyp\n(see [node-gyp PR #429](https://github.com/TooTallNate/node-gyp/pull/429)).\nIt looks like [node-gyp support itself eats up development resources](https://github.com/TooTallNate/node-gyp/issues),\nso there won't be new features like this added or merged in the near future.\nSo with node-gyp you are stuck to good old Make which makes build times very long while working on large modules.\n\nSo, let's take a look at CMake compared to the above bullet points.\n\n1. Cmake is quite mature and very widely used, making it quite stable and convenient. It's used by projects like\n[Blender](http://wiki.blender.org/index.php/Dev:Doc/Building_Blender/Linux/Ubuntu/CMake),\n[LLVM](http://llvm.org/docs/CMake.html), [MySQL or Netflix](http://www.cmake.org/success/),\nand it isn't likely to be abandoned in the near future.\n\n2. It's native software, having no dependencies to any runtime.\n\n3. Right now CMake has all of the features that\n[were missing when development of gyp started](https://code.google.com/p/gyp/wiki/GypVsCMake), and on top of that\nit still has those features that gyp didn't have since then.\nIt has an own module ecosystem with [internal modules](http://www.cmake.org/cmake/help/v3.2/manual/cmake-modules.7.html),\nand with 3rd party gems like [Compile Time Reducer (Cotire)](https://github.com/sakra/cotire).\n\n4. CMake has [excellent documentation](http://www.cmake.org/documentation/),\nlots of [tutorials](https://www.google.hu/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=cmake%20tutorial),\nand [examples](https://www.google.hu/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=cmake+example).\n\n5. If you pick a native cross platform library, there is a very good chance that is uses CMake as of its build system,\nor it has CMake build files somewhere,\nfor example: [Shark](http://image.diku.dk/shark/sphinx_pages/build/html/rest_sources/getting_started/installation.html),\n[Lua](https://github.com/LuaDist/lua), [SDL](http://wiki.libsdl.org/Installation).\nIf not, [there are converters](http://www.cmake.org/Wiki/CMake#Converters_from_other_buildsystems_to_CMake)\nthat helps you to create CMake files from other project formats.\n\n6. CMake is widely supported by major cross platform C++ IDEs\nlike: [QtCreator](http://doc.qt.io/qtcreator/creator-project-cmake.html), [KDevelop](https://www.kdevelop.org/)\nand the upcoming [CLion](https://www.jetbrains.com/clion/#cmake-support) from JetBrains.\nWith CMake.js you are gonna be able to develop Node.js addons by using those,\neven you have the ability to use features like integrated debugging.\n\n7. CMake.js module doesn't build your project, CMake does.\nAll of its commands (configure, build, clean, etc.) are simple CMake invocations without involving JS magic anywhere.\nEven you can print CMake command line with CMake.js module for each command (eg.: cmake-js print-configure, cmake-js print-build, cmake-js print-clean).\nThis means supporting new features of a given native build system (like new version of Ninja or Visual Studio)\nwon't involve developer efforts from CMake.js side, installing new versions of CMake will be enough.\n\n## Installation\n\n```bash\nnpm install -g cmake-js\n```\n\n**Help:**\n\n```bash\ncmake-js --help\n```\n\n```\nUsage: cmake-js [<command>] [options]\n\nCommands:\n  install          Install Node.js/io.js distribution files if needed\n  configure        Configure CMake project\n  print-configure  Print the configuration command\n  build            Build the project (will configure first if required)\n  print-build      Print the build command\n  clean            Clean the project directory\n  print-clean      Print the clean command\n  reconfigure      Clean the project directory then configure the project\n  rebuild          Clean the project directory then build the project\n  compile          Build the project, and if build fails, try a full rebuild\n\nOptions:\n  --version              Show version number                           [boolean]\n  -h, --help             show this screen                              [boolean]\n  -l, --log-level        set log level (silly, verbose, info, http, warn,\n                         error), default is info                        [string]\n  -d, --directory        specify CMake project's directory (where CMakeLists.txt\n                         located)                                       [string]\n  -D, --debug            build debug configuration                     [boolean]\n  -c, --cmake-path       path of CMake executable                       [string]\n  -m, --prefer-make      use Unix Makefiles even if Ninja is available (Posix)\n                                                                       [boolean]\n  -x, --prefer-xcode     use Xcode instead of Unix Makefiles           [boolean]\n  -g, --prefer-gnu       use GNU compiler instead of default CMake compiler, if\n                         available (Posix)                             [boolean]\n  -C, --prefer-clang     use Clang compiler instead of default CMake compiler,\n                         if available (Posix)                          [boolean]\n  -s, --std              C++ standard, eg.: c++98, c++11, c++14, etc., default\n                         is c++11 (Posix)                               [string]\n  -r, --runtime          the runtime to use                             [string]\n  -v, --runtime-version  the runtime version to use                     [string]\n  -a, --arch             the architecture to build in                   [string]\n  -o, --prec11           use C++98 standard (obsolete: use -s=c++98 instead)\n                                                                       [boolean]\n  --CD                   Custom argument passed to CMake in format:\n                         -D<your-arg-here>                              [string]\n```\n\n**Requirements:**\n\n- [CMake](http://www.cmake.org/download/)\n- A proper C/C++ compiler toolchain of the given platform\n    - **Windows**:\n        - Visual C++ Build Tools ([Technical Preview works](https://www.microsoft.com/en-us/download/details.aspx?id=48159))\n        or a recent version of Visual C++ will do ([the free Community](https://www.visualstudio.com/en-us/news/vs2013-community-vs.aspx) version works well)             \n    - **Unix/Posix**:\n        - Clang or GCC\n        - Ninja or Make (Ninja will be picked if both present)\n\n## Usage\n\n### General\n\nIn a nutshell. *(For more complete documentation please see [the first tutorial](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-01-Creating-a-native-module-by-using-CMake.js-and-NAN).)*\n\n- Install cmake-js for your module `npm install --save cmake-js`\n- Put a CMakeLists.txt file into you module root with this minimal required content:\n\n```cmake\nproject (your-addon-name-here)\ninclude_directories(${CMAKE_JS_INC})\nfile(GLOB SOURCE_FILES \"your-source files-location-here\")\nadd_library(${PROJECT_NAME} SHARED ${SOURCE_FILES})\nset_target_properties(${PROJECT_NAME} PROPERTIES PREFIX \"\" SUFFIX \".node\")\ntarget_link_libraries(${PROJECT_NAME} ${CMAKE_JS_LIB})\n```\n\n- Add the following into your package.json scripts section:\n\n```json\n\"scripts\": {\n    \"install\": \"cmake-js compile\"\n  }\n```\n\n#### Commandline\n\nIn your module folder you can access cmake-js commands if you install cmake-js globally:\n\n```\nnpm install -g cmake-js\n```\n\nPlease refer to the `--help` for the lists of available commands (they are like commands in `node-gyp`).\n\nYou can override the project default runtimes via `--runtime` and `--runtime-version`, such as: `--runtime=electron --runtime-version=0.26.0`. See below for more info on runtimes.\n\n### CMake Specific\n\n`CMAKE_JS_VERSION` variable will reflect the actual CMake.js version. So CMake.js based builds could be detected, eg.:\n\n```cmake\nif (CMAKE_JS_VERSION)\n    add_subdirectory(node_addon)\nelse()\n    add_subdirectory(other_subproject)\nendif()\n```_\n\n### NPM Config Integration\n\nYou can set npm configuration options for CMake.js.\n\nFor all users (global):\n\n```\nnpm config set cmake_<key> <value> --global\n```\n\nFor current user:\n\n```\nnpm config set cmake_<key> <value>\n```\n\nCMake.js will set a variable named uppercase `\"<key>\"` to `<value>` (by using `-D<key>=\"<value>\"` option). User's settings will **overwrite** globals.\n\n#### Example:\n\nEnter at command prompt:\n\n```\nnpm config set cmake_bubu=\"kittyfck\"\n```\n\nThen write to your CMakeLists.txt the following:\n\n```cmake\nmessage (STATUS ${BUBU})\n```\n\nThis will print during configure:\n\n```\n--- kittyfck\n```\n\n### Custom CMake options\n\nYou can add custom CMake options by beginning option name with `CD`.\n\n#### Example\n\nIn command prompt:\n```\ncmake-js compile --CDBUBU=\"kittyfck\"\n```\n\nThen in your CMakeLists.txt:\n\n```cmake\nmessage (STATUS ${BUBU})\n```\n\nThis will print during configure:\n\n```\n--- kittyfck\n```\n\n### Runtimes\n\nYou can configure runtimes for compiling target for all depending CMake.js modules in an application. Define a `cmake-js` key in the application's root `package.json` file, eg.:\n\n```json\n{\n  \"name\": \"ta-taram-taram\",\n  \"description\": \"pa-param-pam-pam\",\n  \"version\": \"1.0.0\",\n  \"main\": \"app.js\",\n  \"cmake-js\": {\n    \"runtime\": \"node\",\n    \"runtimeVersion\": \"0.12.0\",\n    \"arch\": \"ia32\"\n  }\n}\n```\n\nAvailable settings:\n\n- **runtime**: application's target runtime, possible values are:\n\t- `node`: Node.js\n\t- `iojs`: io.js\n\t- `nw`: nw.js\n\t- `electron`: Electron\n- **runtimeVersion**: version of the application's target runtime, for example: `0.12.1`\n- **arch**: architecutre of application's target runtime (eg: `x64`, `ia32`, `arm`). *Notice: on non-Windows systems the C++ toolset's architecture's gonna be used despite of this setting. If you don't specify this on Windows, then architecture of the main node/io.js runtime is gonna be used, so you have to choose a matching nw.js runtime.*\n\n#### Runtime options in CMakeLists.txt\n\nThe actual node runtime parameters are detectable in CMakeLists.txt files, the following variables are set:\n\n- **NODE_RUNTIME**: `\"node\"`, `\"iojs\"`, `\"nw\"`, `\"electron\"`\n- **NODE_RUNTIMEVERSION**: for example: `\"0.12.1\"`\n- **NODE_ARCH**: `\"x64\"`, `\"ia32\"`, `\"arm\"`\n\n#### NW.js\n\nTo make compatible your NW.js application with any CMake.js based modules, write the following to your application's package.json file:\n\n```json\n{\n  \"cmake-js\": {\n    \"runtime\": \"nw\",\n    \"runtimeVersion\": \"nw.js-version-here\",\n    \"arch\": \"whatever-setting-is-appropriate-for-your-application's-windows-build\"\n  }\n}\n```\n\nThat's it. There is nothing else to do either on the application's or on the module's side, CMake.js modules are compatible with NW.js out-of-the-box. For more complete documentation please see [the third tutorial](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-03-Using-CMake.js-based-native-modules-with-nw.js).\n\n#### Electron\n\nTo make compatible your Electron application with any CMake.js based modules, write the following to your application's package.json file:\n\n```json\n{\n  \"cmake-js\": {\n    \"runtime\": \"electron\",\n    \"runtimeVersion\": \"electron-runtime-version-here\",\n    \"arch\": \"whatever-setting-is-appropriate-for-your-application's-windows-build\"\n  }\n}\n```\n\nThat's it. There is nothing else to do either on the application's or on the module's side, CMake.js modules are compatible with Electron out-of-the-box.\n\n#### Important\n\nIt is important to understand that this setting is to be configured in the **application's root package.json file**. If you're creating a native module targeting nw.js for example, then **do not specify anything** in your module's package.json. It's the actual application's decision to specify its runtime, your module's just compatible anything that was mentioned in the [About chapter](#about). Actually defining `cmake-js` key in your module's package.json file may lead to an error. Why? If you set it up to use nw.js 0.12.1 for example, then when it gets compiled during development time (to run its unit tests for example) it's gonna be compiled against io.js 1.2 runtime. But if you're having io.js 34.0.1 at the commandline then, which is binary incompatible with 1.2, then your unit tests will fail for sure. So it is advised to not use cmake-js target settings in your module's package.json, because that way CMake.js will use that you have, and your tests will pass.\n\n## Tutorials\n\n- [TUTORIAL 01 Creating a native module by using CMake.js and NAN](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-01-Creating-a-native-module-by-using-CMake.js-and-NAN)\n- [TUTORIAL 02 Creating CMake.js based native addons with Qt Creator](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-02-Creating-CMake.js-based-native-addons-with-QT-Creator)\n- [TUTORIAL 03 Using CMake.js based native modules with NW.js](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-03-Using-CMake.js-based-native-modules-with-nw.js)\n- [TUTORIAL 04 Creating CMake.js based native modules with Boost dependency](https://github.com/unbornchikken/cmake-js/wiki/TUTORIAL-04-Creating-CMake.js-based-native-modules-with-Boost-dependency)\n\n## Use case in the works - ArrayFire.js\n\nI'm working on the Node.js port of the awesome [ArrayFire](http://arrayfire.com/) CPU/GPU computing library, please follow its status in its repo: [ArrayFire.js](https://github.com/arrayfire/arrayfire_js).\n\n## Changelog\n\nView [changelog.md](changelog.md)\n\n## Credits\n\n- [Ivshti (Ivo Georgiev)](https://github.com/Ivshti) - Electron support\n- [Johan (JohanvdWest)](https://github.com/JohanvdWest) - option for supporting pre C++11 compilers\n- [javedulu](https://github.com/javedulu) option to generate Xcode project (-x, --prefer-xcode)\n- [Gerhard Berger](https://github.com/gerhardberger) - Custom CMake parameter support\n"
}