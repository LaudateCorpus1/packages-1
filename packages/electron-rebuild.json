{
  "name": "electron-rebuild",
  "version": "1.3.0",
  "description": "Electron supporting package to rebuild native node modules against the currently installed electron",
  "main": "lib/main.js",
  "scripts": {
    "compile": "babel --stage 1 --optional runtime -d lib/ src/ && babel --stage 1 --optional runtime -d test-dist/ test/",
    "prepublish": "npm run compile",
    "test": "npm run compile && mocha test-dist/* --timeout 120000"
  },
  "bin": {
    "electron-rebuild": "lib/cli.js"
  },
  "repository": {
    "user": "electron",
    "repo": "electron-rebuild",
    "host": "github.com",
    "branch": "master",
    "apiHost": "api.github.com",
    "tarball_url": "https://api.github.com/repos/electron/electron-rebuild/tarball/master",
    "clone_url": "https://github.com/electron/electron-rebuild",
    "https_url": "https://github.com/electron/electron-rebuild",
    "travis_url": "https://travis-ci.org/electron/electron-rebuild",
    "zip_url": "https://github.com/electron/electron-rebuild/archive/master.zip",
    "api_url": "https://api.github.com/repos/electron/electron-rebuild"
  },
  "keywords": [
    "electron"
  ],
  "author": {
    "name": "Paul Betts",
    "email": "paul@paulbetts.org"
  },
  "license": "MIT",
  "homepage": "https://github.com/electron/electron-rebuild",
  "dependencies": {
    "babel-runtime": "^5.8.20",
    "glob": "^6.0.3",
    "lodash": "^3.10.1",
    "ncp": "^2.0.0",
    "npm": "^3.5.3",
    "nslog": "^3.0.0",
    "promise": "^7.1.1",
    "rimraf": "^2.5.0",
    "yargs": "^3.31.0"
  },
  "devDependencies": {
    "babel": "^5.8.23",
    "chai": "^3.4.1",
    "chai-as-promised": "^5.2.0",
    "electron-prebuilt": "^0.36.3",
    "mocha": "^2.3.4"
  },
  "gitHead": "4718ea520b3faac4b4cd137a8cf04d1e4fe20d6d",
  "_npmVersion": "3.10.6",
  "_nodeVersion": "6.2.0",
  "dist": {
    "shasum": "46fe6eda2fd9c05a74a9f207ad03adc97136de43",
    "tarball": "http://registry.npmjs.org/electron-rebuild/-/electron-rebuild-1.3.0.tgz"
  },
  "stars": 3,
  "versions": [
    {
      "number": "0.1.0",
      "date": "2015-05-04T08:45:39.559Z"
    },
    {
      "number": "0.1.1",
      "date": "2015-05-04T08:57:00.696Z"
    },
    {
      "number": "0.1.2",
      "date": "2015-05-04T09:17:49.335Z"
    },
    {
      "number": "0.1.3",
      "date": "2015-05-05T05:03:34.975Z"
    },
    {
      "number": "0.1.4",
      "date": "2015-05-05T05:09:58.495Z"
    },
    {
      "number": "0.2.0",
      "date": "2015-05-27T22:13:48.168Z"
    },
    {
      "number": "0.2.1",
      "date": "2015-06-01T22:57:08.818Z"
    },
    {
      "number": "0.2.2",
      "date": "2015-06-05T21:08:54.368Z"
    },
    {
      "number": "0.2.3",
      "date": "2015-07-02T04:29:52.310Z"
    },
    {
      "number": "0.2.4",
      "date": "2015-07-19T23:16:57.901Z"
    },
    {
      "number": "0.2.5",
      "date": "2015-07-22T07:23:49.528Z"
    },
    {
      "number": "1.0.0",
      "date": "2015-09-03T06:38:41.192Z"
    },
    {
      "number": "1.0.1",
      "date": "2015-10-03T00:00:35.796Z"
    },
    {
      "number": "1.0.2",
      "date": "2015-10-16T18:36:10.084Z"
    },
    {
      "number": "1.1.0",
      "date": "2016-01-10T01:34:30.824Z"
    },
    {
      "number": "1.1.1",
      "date": "2016-01-10T01:41:54.399Z"
    },
    {
      "number": "1.1.2",
      "date": "2016-01-26T00:56:51.087Z"
    },
    {
      "number": "1.1.3",
      "date": "2016-02-02T18:46:31.665Z"
    },
    {
      "number": "1.1.4",
      "date": "2016-05-16T13:54:05.130Z"
    },
    {
      "number": "1.1.5",
      "date": "2016-05-27T22:21:40.207Z"
    },
    {
      "number": "1.2.0",
      "date": "2016-08-08T18:59:27.480Z"
    },
    {
      "number": "1.2.1",
      "date": "2016-09-02T19:21:05.498Z"
    },
    {
      "number": "1.3.0",
      "date": "2016-10-20T19:47:06.151Z"
    }
  ],
  "created": "2015-05-04T08:45:39.559Z",
  "modified": "2016-10-20T19:47:06.151Z",
  "lastPublisher": {
    "name": "paulcbetts",
    "email": "paul@paulbetts.org"
  },
  "owners": [
    {
      "name": "electron",
      "email": "electron@github.com"
    },
    {
      "name": "jlord",
      "email": "to.jlord@gmail.com"
    },
    {
      "name": "kevinsawicki",
      "email": "kevinsawicki@gmail.com"
    },
    {
      "name": "paulcbetts",
      "email": "paul@paulbetts.org"
    },
    {
      "name": "zcbenz",
      "email": "zcbenz@gmail.com"
    },
    {
      "name": "zeke",
      "email": "zeke@sikelianos.com"
    }
  ],
  "readme": "## Electron-Rebuild\r\n\r\nThis executable rebuilds native Node.js modules against the version of Node.js\r\nthat your Electron project is using. This allows you to use native Node.js\r\nmodules in Electron apps without your system version of Node.js matching exactly\r\n(which is often not the case, and sometimes not even possible).\r\n\r\n### How does it work?\r\n\r\nInstall the package with `--save-dev`:\r\n\r\n```sh\r\nnpm install --save-dev electron-rebuild\r\n```\r\n\r\nThen, whenever you install a new npm package, rerun electron-rebuild:\r\n\r\n```sh\r\n./node_modules/.bin/electron-rebuild\r\n```\r\n\r\nOr if you're on Windows:\r\n\r\n```sh\r\n.\\node_modules\\.bin\\electron-rebuild.cmd\r\n```\r\nIf you have a good node-gyp config but you see an error about a missing element on Windows like \"Could not load the Visual C++ component \"VCBuild.exe\" , try to launch electron-rebuild in an npm script:\r\n\r\n```json\r\n\"scripts\": {\r\n  \"rebuild\" : \"electron-rebuild -f -w yourmodule\"\r\n}\r\n```\r\n\r\nand then\r\n\r\n```sh\r\nnpm run rebuild\r\n```\r\n\r\n### How can I integrate this into Grunt / Gulp / Whatever?\r\n\r\nelectron-rebuild is also a library that you can just require into your app or\r\nbuild process. It has two main methods:\r\n\r\n```js\r\nimport { installNodeHeaders, rebuildNativeModules, shouldRebuildNativeModules } from 'electron-rebuild';\r\n\r\n// Public: Determines whether we need to rebuild native modules (i.e. if they're\r\n// already compiled for the right version of Electron, no need to rebuild them!)\r\n//\r\n// pathToElectronExecutable - Path to the electron executable that we'll use\r\n//                            to determine NODE_MODULE_VERSION\r\n// explicitNodeVersion (optional) - If given, use this instead of probing Electron\r\n//\r\n// Returns a Promise that if true, indicates you should build native modules\r\nlet shouldBuild = shouldRebuildNativeModules('/path/to/Electron');\r\n\r\n// Public: Downloads and installs the header / lib files required to build\r\n// native modules.\r\n//\r\n// nodeVersion - the version of Electron to download headers for\r\n// nodeDistUrl (optional) - the URL to download the distribution from\r\n// headersDir (optional) - where to put the headers\r\n// arch (optional) - The architecture to build against (for building 32-bit apps\r\n//                   on 64-bit Windows for example)\r\n//\r\n// Returns a Promise indicating whether the operation succeeded or not\r\nlet headerResult = installNodeHeaders('1.3.1');\r\n\r\n// Public: Rebuilds a node_modules directory with the given Electron version.\r\n//\r\n// nodeVersion - the version of Electron to download headers for\r\n// nodeModulesPath - the path to a node_modules directory\r\n// headersDir (optional) - where to find the headers\r\n// Returns a Promise indicating whether the operation succeeded or not\r\nheaderResult.then(() => rebuildNativeModules('1.3.1', './node_modules'));\r\n```\r\n\r\nA full build process might look something like:\r\n\r\n```js\r\nlet childProcess = require('child_process');\r\nlet pathToElectron = require('electron-prebuilt');\r\n\r\nshouldRebuildNativeModules(pathToElectron)\r\n  .then((shouldBuild) => {\r\n    if (!shouldBuild) return true;\r\n\r\n    let electronVersion = childProcess.execSync(`${pathToElectron} --version`, {\r\n      encoding: 'utf8',\r\n    });\r\n    electronVersion = electronVersion.match(/v(\\d+\\.\\d+\\.\\d+)/)[1];\r\n\r\n    return installNodeHeaders(electronVersion)\r\n      .then(() => rebuildNativeModules(electronVersion, './node_modules'));\r\n  })\r\n  .catch((e) => {\r\n    console.error(\"Building modules didn't work!\");\r\n    console.error(e);\r\n  });\r\n```\r\n\r\n### `node-pre-gyp` workaround\r\n\r\nNote that there is a known [issue](https://github.com/mapbox/node-pre-gyp/pull/187) with\r\n`node-pre-gyp` that prevents it from correctly locating the native modules built by\r\n`electron-rebuild`. `node-pre-gyp` is used by some popular NPM packages like `sqlite3`,\r\nand `node-inspector`, so even if your app or package does not have a direct dependency on\r\n`node-pre-gyp` you're bound to run into this issue sooner or later. To work around it call\r\n`preGypFixRun` after the build is complete in order to copy the native modules to a location\r\nwhere `node-pre-gyp` can find them:\r\n\r\n```js\r\nimport { preGypFixRun } from 'electron-rebuild';\r\n\r\nreturn installNodeHeaders('1.3.1')\r\n  .then(() => rebuildNativeModules('1.3.1', './node_modules'))\r\n  .then(() => preGypFixRun('./node_modules', true, pathToElectron));\r\n```\r\n\r\nIf you're using the CLI to perform the build then use the `-p` or `--pre-gyp-fix` option.\r\n\r\n### Alternatives\r\n\r\n- [require-rebuild](https://github.com/juliangruber/require-rebuild) patches `require()` to rebuild native node modules on the fly\r\n"
}